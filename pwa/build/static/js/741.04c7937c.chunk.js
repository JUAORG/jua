"use strict";(self.webpackChunkjua_mvp=self.webpackChunkjua_mvp||[]).push([[741],{7741:(e,r,t)=>{t.r(r),t.d(r,{default:()=>J});var i=t(7051),n=t(5043),s=t(6446),a=t(8977),l=t(9252),o=t(5865),c=t(1637),d=t(8903),u=t(5472),h=t(8565),p=t(9838),A=t(45),f=t(3536),x=t(9581),m=t(4056),j=t(579);const b=["children","value","index"];function v(e){const{children:r,value:t,index:n}=e,a=(0,A.A)(e,b);return(0,j.jsx)("div",(0,i.A)((0,i.A)({role:"tabpanel",hidden:t!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},a),{},{children:t===n&&(0,j.jsx)(s.A,{sx:{p:3},children:(0,j.jsx)(o.A,{children:r})})}))}function g(e){let{variant:r,tabHeadings:t,tabContents:a,isCentered:l=!0,scrollButtons:o="false",allowScrollButtonsMobile:c="false"}=e;const[d,u]=n.useState(0);return(0,j.jsxs)(s.A,{sx:{width:"100%"},children:[(0,j.jsx)(s.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,j.jsx)(x.A,{value:d,variant:r,onChange:(e,r)=>{u(r)},scrollButtons:o,allowScrollButtonsMobile:c,children:(0,f.map)(t,((e,r)=>(0,j.jsx)(m.A,(0,i.A)({label:e},function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(r)))))})}),(0,f.map)(a,((e,r)=>(0,j.jsx)(v,{value:d,index:r,children:e})))]})}var y=t(4858),w=t(4535),S=t(8739),_=t(8911),W=t(7739),k=t(1045),P=t(5795),U=t(3193),E=t(9190),C=t(3914),q=t(2143),F=t(1787),I=t(2812),D=t(8010),H=t(8147),z=t(9267),B=t(4646);const L=(0,w.Ay)(S.A)((e=>{let{theme:r}=e;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(r.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}));function M(){const e=(0,y.mN)(),[r,t]=(0,n.useState)(!1),[s]=(0,n.useState)([{name:"Finance"},{name:"Tech"},{name:"Legal"}]),[a,l]=(0,n.useState)(""),{register:o,reset:c,handleSubmit:d}=e;(0,n.useEffect)((()=>{if(!h.j.currentUser)return;(async()=>{try{const e=(0,u.H9)(h.db,"users",h.j.currentUser.uid),r=await(0,u.x7)(e);if(r.exists()){const e=r.data();c({first_name:e.first_name||"",last_name:e.last_name||"",bio:e.bio||"",industry:e.industry||"",rate_per_hour_in_rands:e.rate_per_hour_in_rands||"",linkedIn:e.linkedIn||""}),l(e.photoURL||h.j.currentUser.photoURL||"")}}catch(e){}})()}),[c]);return(0,j.jsx)("form",{onSubmit:d((async e=>{if(h.j.currentUser)try{t(!0);const r=(0,u.H9)(h.db,"users",h.j.currentUser.uid);await(0,u.mZ)(r,e),B.A.success("Profile updated successfully","Success")}catch(r){B.A.error("Something went wrong","Error")}finally{t(!1)}else B.A.error("Not authenticated","Error")})),children:(0,j.jsxs)(_.A,{spacing:3,children:[(0,j.jsx)(W.A,{title:"Click to change profile picture",children:(0,j.jsxs)("label",{htmlFor:"profile-picture-upload",children:[(0,j.jsx)("input",{type:"file",accept:"image/*",id:"profile-picture-upload",style:{display:"none"},onChange:async e=>{const r=e.target.files[0];if(r&&h.j.currentUser)try{const e=(0,H.KR)(h.I,"users/".concat(h.j.currentUser.uid,"/profile_picture"));await(0,H.D)(e,r);const t=await(0,H.qk)(e);await(0,z.r7)(h.j.currentUser,{photoURL:t});const i=(0,u.H9)(h.db,"users",h.j.currentUser.uid);await(0,u.mZ)(i,{photoURL:t}),l(t),B.A.success("Profile picture updated","Success")}catch(t){B.A.error("Failed to upload profile picture","Error")}}}),(0,j.jsx)(L,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",sx:{cursor:"pointer"},children:(0,j.jsx)(k.A,{alt:"Profile Picture",src:"string"===typeof a&&""!==a.trim()?a:"/static/avatar_placeholder.png",sx:{width:80,height:80}})})]})}),(0,j.jsx)(P.A,(0,i.A)({fullWidth:!0,label:"First Name"},o("first_name"))),(0,j.jsx)(P.A,(0,i.A)({fullWidth:!0,label:"Last Name"},o("last_name"))),(0,j.jsxs)(U.A,{fullWidth:!0,children:[(0,j.jsx)(E.A,{children:"Industry"}),(0,j.jsx)(C.A,(0,i.A)((0,i.A)({},o("industry")),{},{defaultValue:"",children:(0,f.map)(s,((e,r)=>(0,j.jsx)(q.A,{value:e.name,children:e.name},r)))}))]}),(0,j.jsx)(P.A,(0,i.A)({fullWidth:!0,multiline:!0,minRows:4,label:"About",placeholder:"Add summary"},o("bio"))),(0,j.jsx)(P.A,(0,i.A)((0,i.A)({fullWidth:!0,type:"number",label:"Rate per hour",placeholder:"1500"},o("rate_per_hour_in_rands")),{},{InputProps:{startAdornment:(0,j.jsx)(F.A,{position:"start",children:"R"})}})),(0,j.jsx)(P.A,(0,i.A)((0,i.A)({fullWidth:!0,type:"url",label:"LinkedIn"},o("linkedIn")),{},{placeholder:"https://za.linkedin.com/in/...",InputProps:{startAdornment:(0,j.jsx)(F.A,{position:"start",children:(0,j.jsx)(D.A,{})})}})),(0,j.jsx)(I.A,{fullWidth:!0,size:"large",type:"submit",loading:r,variant:"contained",children:"Update"})]})})}function N(e){var r,t;let{serviceDoc:s}=e;const[a,l]=(0,n.useState)(s||null),[o,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),{register:h,handleSubmit:p,reset:A,formState:{errors:f}}=(0,y.mN)({defaultValues:a||{name:"",price:"",description:""}});(0,n.useEffect)((()=>{a&&A(a)}),[a,A]);return(0,j.jsx)("form",{onSubmit:p((async e=>{c(!0);try{if(a)B.A.success("Service updated","Success");else{l(!0),B.A.success("Service added","Success")}}catch(r){B.A.error("Failed to save service","Error")}finally{c(!1)}})),children:(0,j.jsxs)(_.A,{spacing:3,children:[(0,j.jsxs)(_.A,{spacing:2,direction:{xs:"column",sm:"row"},children:[(0,j.jsx)(P.A,(0,i.A)((0,i.A)({fullWidth:!0,label:"Service"},h("name",{required:"Service name is required"})),{},{error:!!f.name,helperText:null===(r=f.name)||void 0===r?void 0:r.message})),(0,j.jsx)(P.A,(0,i.A)((0,i.A)({fullWidth:!0,type:"number",label:"Price",placeholder:"1500"},h("price",{required:"Price is required",valueAsNumber:!0})),{},{error:!!f.price,helperText:null===(t=f.price)||void 0===t?void 0:t.message,InputProps:{startAdornment:(0,j.jsx)(F.A,{position:"start",children:"R"})}}))]}),(0,j.jsx)(P.A,(0,i.A)({fullWidth:!0,type:"text",label:"Short Description (optional)"},h("description"))),a?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(I.A,{fullWidth:!0,size:"large",type:"submit",loading:o,variant:"contained",children:"Update"}),(0,j.jsx)(I.A,{fullWidth:!0,size:"large",loading:d,onClick:async()=>{if(null!==a&&void 0!==a&&a.id){u(!0);try{B.A.success("Service deleted","Success"),l(null),A()}catch(e){B.A.error("Failed to delete service","Error")}finally{u(!1)}}},variant:"outlined",color:"error",children:"Delete"})]}):(0,j.jsx)(I.A,{fullWidth:!0,size:"large",type:"submit",loading:o,variant:"contained",children:"Add"})]})})}function R(e){const r=(0,f.get)(e,"educationDoc"),t=(0,y.mN)({defaultValues:r}),{register:s,reset:a,handleSubmit:l}=t,[o,c]=(0,n.useState)(!1);return(0,j.jsx)("form",{onSubmit:l((async e=>{var t;const i=null===(t=h.j.currentUser)||void 0===t?void 0:t.uid;if(!i)throw new Error("User not authenticated");c(!0);try{if(null!==r&&void 0!==r&&r.id){const t=(0,u.H9)(h.db,"users",i,"education",r.id);await(0,u.mZ)(t,e)}else{const r=(0,u.rJ)(h.db,"users",i,"education");await(0,u.gS)(r,e)}B.A.success("Profile updated","Success"),a()}catch(n){B.A.error("Something went wrong","Error")}finally{c(!1)}})),children:(0,j.jsxs)(_.A,{spacing:3,pb:5,children:[(0,j.jsx)(P.A,(0,i.A)({required:!0,fullWidth:!0,label:"Institution/University"},s("institution"))),(0,j.jsx)(P.A,(0,i.A)({required:!0,fullWidth:!0,label:"Course"},s("course"))),(0,j.jsx)(P.A,(0,i.A)({required:!0,fullWidth:!0,label:"Field of study"},s("field_of_study"))),(0,j.jsxs)(_.A,{sx:{float:"right"},direction:{xs:"column",sm:"row"},spacing:2,children:[(0,j.jsx)(P.A,(0,i.A)((0,i.A)({required:!0,fullWidth:!0,id:"start_year",label:"Start Year",type:"date"},s("date_from")),{},{InputLabelProps:{shrink:!0}})),(0,j.jsx)(P.A,(0,i.A)((0,i.A)({fullWidth:!0,id:"end_year",label:"End Year",type:"date"},s("date_to")),{},{InputLabelProps:{shrink:!0}}))]}),(0,j.jsx)(P.A,(0,i.A)({fullWidth:!0,type:"text",label:"Description (optional)"},s("description"))),r?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(I.A,{fullWidth:!0,size:"large",type:"submit",loading:o,variant:"contained",children:"Update"}),(0,j.jsx)(I.A,{fullWidth:!0,size:"large",loading:!1,onClick:async()=>{var e;const t=null===(e=h.j.currentUser)||void 0===e?void 0:e.uid;if(t&&null!==r&&void 0!==r&&r.id)try{const e=(0,u.H9)(h.db,"users",t,"education",r.id);await(0,u.kd)(e),a(),B.A.success("Profile updated","Success")}catch(i){B.A.error(i.message,"Error")}},variant:"contained",color:"error",children:"Delete"})]}):(0,j.jsx)(I.A,{fullWidth:!0,size:"large",type:"submit",loading:o,variant:"contained",children:"Add"})]})})}function T(e){const r=(0,f.get)(e,"workDoc"),t=(0,y.mN)({defaultValues:r}),{register:s,reset:a,handleSubmit:l}=t,[o,c]=(0,n.useState)(!1);return(0,j.jsx)("form",{onSubmit:l((async e=>{var t;const i=null===(t=h.j.currentUser)||void 0===t?void 0:t.uid;if(!i)throw new Error("User not authenticated");c(!0);try{if(null!==r&&void 0!==r&&r.id){const t=(0,u.H9)(h.db,"users",i,"experience",r.id);await(0,u.mZ)(t,e)}else{const r=(0,u.rJ)(h.db,"users",i,"experience");await(0,u.gS)(r,e)}B.A.success("Profile updated","Success"),a()}catch(n){B.A.error("Something went wrong","Error")}finally{c(!1)}})),children:(0,j.jsxs)(_.A,{spacing:3,pb:5,children:[(0,j.jsx)(P.A,(0,i.A)({required:!0,fullWidth:!0,label:"Company"},s("company"))),(0,j.jsx)(P.A,(0,i.A)({required:!0,fullWidth:!0,label:"Title"},s("title"))),(0,j.jsxs)(_.A,{spacing:2,sx:{float:"right"},direction:{xs:"column",sm:"row"},children:[(0,j.jsx)(P.A,(0,i.A)((0,i.A)({required:!0,fullWidth:!0,id:"start_year",label:"From",type:"date"},s("date_from")),{},{InputLabelProps:{shrink:!0}})),(0,j.jsx)(P.A,(0,i.A)((0,i.A)({fullWidth:!0,id:"end_year",label:"To",type:"date"},s("date_to")),{},{helperText:"If present, leave empty",InputLabelProps:{shrink:!0}}))]}),(0,j.jsx)(P.A,(0,i.A)({fullWidth:!0,type:"text",label:"Description (optional)"},s("description"))),r?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(I.A,{fullWidth:!0,size:"large",type:"submit",loading:o,variant:"contained",children:"Update"}),(0,j.jsx)(I.A,{fullWidth:!0,size:"large",loading:!1,onClick:async()=>{var e;const t=null===(e=h.j.currentUser)||void 0===e?void 0:e.uid;if(t&&null!==r&&void 0!==r&&r.id)try{const e=(0,u.H9)(h.db,"users",t,"experience",r.id);await(0,u.kd)(e),a(),B.A.success("Profile updated","Success")}catch(i){B.A.error(i.message,"Error")}},variant:"contained",color:"error",children:"Delete"})]}):(0,j.jsx)(I.A,{fullWidth:!0,size:"large",type:"submit",loading:o,variant:"contained",children:"Add"})]})})}var O=t(8185);const G=()=>(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(O.A,{height:50,animation:"wave"}),(0,j.jsx)(O.A,{height:50,animation:"wave"}),(0,j.jsx)(O.A,{height:50,animation:"wave"}),(0,j.jsx)(O.A,{height:50,animation:"wave"})]});function V(){const e=(0,y.mN)(),{register:r,reset:t,setValue:s,handleSubmit:a}=e,[l,o]=(0,n.useState)(!0),[c,d]=(0,n.useState)("");(0,n.useEffect)((()=>{if(!h.j.currentUser)return;(async()=>{try{const e=(0,u.H9)(h.db,"users",h.j.currentUser.uid),r=await(0,u.x7)(e);if(r.exists()){const e=r.data().accountPayment||{};t(e),d(e.preferred_payment_method||"")}}catch(e){}finally{o(!1)}})()}),[t]);return(0,j.jsx)("form",{onSubmit:a((async e=>{try{o(!0);const r=(0,u.H9)(h.db,"users",h.j.currentUser.uid);await(0,u.mZ)(r,{accountPayment:e}),B.A.success("Account payment updated","Success")}catch(r){B.A.error("Something went wrong","Error")}finally{o(!1)}})),children:(0,j.jsxs)(_.A,{spacing:3,pb:5,children:[l&&(0,j.jsx)(G,{}),!l&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(E.A,{children:"Preferred Payment Method"}),(0,j.jsxs)(C.A,{value:c,onChange:e=>{s("preferred_payment_method",e.target.value),d(e.target.value)},required:!0,children:[(0,j.jsx)(q.A,{value:"EWALLET",children:"Ewallet"}),(0,j.jsx)(q.A,{value:"EFT",children:"EFT"})]}),(0,j.jsx)(P.A,(0,i.A)({required:!0,fullWidth:!0,label:"Account Holder Name"},r("account_holder_name"))),(0,j.jsx)(P.A,(0,i.A)({required:!0,fullWidth:!0,label:"Bank"},r("bank"))),(0,j.jsx)(P.A,(0,i.A)({required:!0,fullWidth:!0,label:"Branch Code"},r("branch_code"))),(0,j.jsx)(P.A,(0,i.A)({required:!0,fullWidth:!0,label:"Account Number"},r("account_number"))),(0,j.jsx)(P.A,(0,i.A)({required:!0,fullWidth:!0,label:"Phone Number"},r("phone_number"))),(0,j.jsx)(I.A,{fullWidth:!0,size:"large",type:"submit",loading:l,variant:"contained",children:"Update"})]})]})})}function J(){const[e,r]=(0,n.useState)(null),[t,A]=(0,n.useState)([]),[f,x]=(0,n.useState)([]),[m,b]=(0,n.useState)(!0),[v,y]=(0,n.useState)(!1),[w,S]=(0,n.useState)(!1);(0,n.useEffect)((()=>{(async()=>{try{var e;const t=null===(e=h.j.currentUser)||void 0===e?void 0:e.uid;if(!t)throw new Error("No user logged in");const n=await(0,u.x7)((0,u.H9)(h.db,"users",t));n.exists()&&r(n.data());const s=await(0,u.GG)((0,u.rJ)(h.db,"users",t,"education"));A(s.docs.map((e=>(0,i.A)((0,i.A)({},e.data()),{},{id:e.id}))));const a=await(0,u.GG)((0,u.rJ)(h.db,"users",t,"experience"));x(a.docs.map((e=>(0,i.A)((0,i.A)({},e.data()),{},{id:e.id}))))}catch(t){B.A.error("Failed to load profile data","Error")}finally{b(!1)}})()}),[]);const _=(0,n.useMemo)((()=>(0,j.jsxs)(j.Fragment,{children:[t.map((e=>(0,j.jsx)(R,{educationDoc:e},e.id))),(0,j.jsx)(R,{})]})),[t]),W=(0,n.useMemo)((()=>(0,j.jsxs)(j.Fragment,{children:[f.map((e=>(0,j.jsx)(T,{workDoc:e},e.id))),(0,j.jsx)(T,{})]})),[f]),k=(0,j.jsx)(s.A,{sx:{borderBottom:1,borderColor:"divider"},children:(0,j.jsx)(g,{scrollButtons:!0,variant:"scrollable",allowScrollButtonsMobile:!0,tabHeadings:["Personal Details","Services","Education","Experience","Payment"],tabContents:[(0,j.jsx)(M,{userProfile:e}),(0,j.jsx)(N,{}),_,W,(0,j.jsx)(V,{})]})}),P=(0,j.jsx)(s.A,{sx:{borderBottom:1,borderColor:"divider",textAlign:"center",mt:4},children:(0,j.jsx)(a.A,{disabled:w||v,onClick:async()=>{},variant:"contained",children:"Apply to become an Affiliate Expert"})});return(0,j.jsx)(p.A,{title:"Profile",children:(0,j.jsxs)(l.A,{maxWidth:"xl",children:[(0,j.jsxs)(o.A,{variant:"h4",sx:{mb:5,textAlign:"center"},children:[(0,j.jsx)("img",{alt:"Profile Illustration",width:200,style:{margin:"auto"},src:"/static/illustrations/undraw_profile.svg"}),"Profile"]}),m?(0,j.jsx)(s.A,{textAlign:"center",children:(0,j.jsx)(c.A,{})}):(0,j.jsx)(d.Ay,{children:null!==e&&void 0!==e&&e.is_service_provider?k:P})]})})}},8010:(e,r,t)=>{var i=t(4994);r.A=void 0;!function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var i={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=n?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=e[s]}i.default=e,t&&t.set(e,i)}(t(5043));var n=i(t(39)),s=t(579);function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}r.A=(0,n.default)((0,s.jsx)("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn")},9838:(e,r,t)=>{t.d(r,{A:()=>A});var i=t(7051),n=t(45),s=t(5173),a=t.n(s),l=t(3602),o=t(9490),c=t(5043),d=t(6446),u=t(579);const h=["children","title","showGoBackArrow","meta"],p=(0,c.forwardRef)(((e,r)=>{let{children:t,title:s="",showGoBackArrow:a=!1,meta:c}=e,p=(0,n.A)(e,h);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.mg,{children:[(0,u.jsx)("title",{children:"".concat(s," | JUA")}),c]}),(0,u.jsxs)(d.A,(0,i.A)((0,i.A)({ref:r},p),{},{children:[a&&(0,u.jsx)(l.A,{onClick:()=>window.history.go(-1),sx:{top:40,left:20,cursor:"pointer",position:"relative"}}),t]}))]})}));p.propTypes={children:a().node.isRequired,title:a().string,meta:a().node};const A=p}}]);
//# sourceMappingURL=741.04c7937c.chunk.js.map